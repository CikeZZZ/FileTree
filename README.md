# ðŸŒ² FileTree - å³é”®ç”Ÿæˆç›®å½•ç»“æž„æ ‘å·¥å…·

> ä¸€é”®åœ¨æ–‡ä»¶å¤¹ç©ºç™½å¤„å³é”®ç”Ÿæˆç¾Žè§‚çš„ç›®å½•æ ‘ï¼Œå¹¶ä¿å­˜ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼æ”¯æŒä¸­æ–‡/è‹±æ–‡è‡ªåŠ¨åˆ‡æ¢ï¼Œé«˜æ€§èƒ½é€’å½’éåŽ†ï¼Œè½»é‡æ— ä¾èµ–ã€‚

---

## âœ¨ åŠŸèƒ½äº®ç‚¹

- âœ… **å³é”®é›†æˆ**ï¼šåœ¨æ–‡ä»¶å¤¹æˆ–æ¡Œé¢ç©ºç™½å¤„å³é”®ï¼Œç›´æŽ¥ç”Ÿæˆç›®å½•æ ‘
- ðŸŒ **è‡ªåŠ¨ä¸­è‹±æ–‡åˆ‡æ¢**ï¼šæ ¹æ®ç³»ç»Ÿè¯­è¨€æ˜¾ç¤ºå¯¹åº”æç¤ºå’Œèœå•å
- ðŸš€ **é«˜æ€§èƒ½éåŽ†**ï¼šé¢„åˆ†é…å†…å­˜ã€å‡å°‘ç³»ç»Ÿè°ƒç”¨ã€æ–‡ä»¶ä¼˜å…ˆæŽ’åº
- ðŸŽ¯ **ç²¾å‡†è·¯å¾„ä¼ é€’**ï¼šä½¿ç”¨ `%V` æ­£ç¡®èŽ·å–å³é”®æ‰€åœ¨ç›®å½•
- ðŸ–¼ **å¸¦å›¾æ ‡èœå•**ï¼šå³é”®é¡¹æ˜¾ç¤ºè‡ªå®šä¹‰å›¾æ ‡ï¼ˆå·²åµŒå…¥ç¨‹åºï¼‰
- ðŸ“ **æ™ºèƒ½è¾“å‡º**ï¼šç»“æžœä¿å­˜ä¸º `directory_tree.txt`ï¼Œæ–‡ä»¶åœ¨å‰ã€ç›®å½•åœ¨åŽ

---

## ðŸ“¥ ä½¿ç”¨æ–¹æ³•

### 1. é¦–æ¬¡è¿è¡Œï¼šæ³¨å†Œå³é”®èœå•

ä»¥**ç®¡ç†å‘˜èº«ä»½è¿è¡Œ** `FileTree.exe`ï¼Œé€‰æ‹© **1. æ³¨å†Œ**ï¼š

```text
=== å³é”®èœå•ç®¡ç† ===
1. æ³¨å†Œâ€œç”Ÿæˆæ–‡ä»¶æ ‘â€åˆ°ç›®å½•èƒŒæ™¯å³é”®èœå•
2. ä»Žå³é”®èœå•ä¸­åˆ é™¤â€œç”Ÿæˆæ–‡ä»¶æ ‘â€
è¯·é€‰æ‹© (1/2): 1
```

âœ… æ³¨å†ŒæˆåŠŸåŽï¼Œåœ¨ä»»æ„**æ–‡ä»¶å¤¹ç©ºç™½å¤„æˆ–æ¡Œé¢**å³é”®ï¼Œå³å¯çœ‹åˆ°ï¼š

- ä¸­æ–‡ç³»ç»Ÿï¼š`ç”Ÿæˆæ–‡ä»¶æ ‘`
- è‹±æ–‡ç³»ç»Ÿï¼š`Generate File Tree`

### 2. ç”Ÿæˆç›®å½•æ ‘

å³é”®ç‚¹å‡» â†’ é€‰æ‹©èœå•é¡¹ï¼Œç¨‹åºå°†è‡ªåŠ¨ï¼š

- éåŽ†å½“å‰ç›®å½•
- ç”Ÿæˆæ ‘å½¢ç»“æž„
- ä¿å­˜ä¸º `å½“å‰ç›®å½•\directory_tree.txt`

ç¤ºä¾‹è¾“å‡º (`directory_tree.txt`)ï¼š

```
ç›®å½•æ ‘: C:\MyProject
MyProject\
â”œâ”€â”€  src\
â”‚   â”œâ”€â”€ main.cpp
â”‚   â””â”€â”€ resource.rc
â”œâ”€â”€  bin\
â”‚   â””â”€â”€ FileTree.exe
â””â”€â”€  README.md
```

### 3. å¸è½½ï¼ˆå¯é€‰ï¼‰

ä»¥**ç®¡ç†å‘˜èº«ä»½è¿è¡Œ** `FileTree.exe`ï¼Œé€‰æ‹© **2. åˆ é™¤**ï¼Œå³å¯ç§»é™¤å³é”®èœå•é¡¹ã€‚

---

## ðŸŒ å¤šè¯­è¨€æ”¯æŒ

ç¨‹åºè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿ UI è¯­è¨€ï¼š

| ç³»ç»Ÿè¯­è¨€          | èœå•å             | æŽ§åˆ¶å°æç¤º | è¾“å‡ºæ ‡é¢˜              |
| ----------------- | ------------------ | ---------- | --------------------- |
| ä¸­æ–‡ï¼ˆç®€ä½“/ç¹ä½“ï¼‰ | ç”Ÿæˆæ–‡ä»¶æ ‘         | ä¸­æ–‡æç¤º   | `ç›®å½•æ ‘: ...`         |
| å…¶ä»–ï¼ˆé»˜è®¤è‹±æ–‡ï¼‰  | Generate File Tree | English    | `Directory Tree: ...` |

> è¾“å‡ºæ–‡ä»¶åå§‹ç»ˆä¸ºè‹±æ–‡ `directory_tree.txt`ï¼Œé¿å…è·¯å¾„å…¼å®¹æ€§é—®é¢˜ã€‚

---

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

- ä½¿ç”¨ `GetUserDefaultUILanguage()` åˆ¤æ–­è¯­è¨€
- æ³¨å†Œè¡¨è·¯å¾„ï¼š`HKEY_CLASSES_ROOT\Directory\Background\shell\...`
- å‘½ä»¤è¡Œå‚æ•°ï¼š`"%V"` ä¼ é€’å³é”®ç›®å½•è·¯å¾„
- æ–‡ä»¶æŽ’åºï¼š**æ–‡ä»¶åœ¨å‰ï¼Œç›®å½•åœ¨åŽ**ï¼ŒåŒç±»åž‹æŒ‰åç§°å‡åº
- å†…å­˜ä¼˜åŒ–ï¼šå­—ç¬¦ä¸²é¢„åˆ†é…ã€å¤ç”¨å¯¹è±¡ã€å‡å°‘åˆ†é…æ¬¡æ•°

---

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** â€”â€” è¯¦æƒ…è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ðŸ’¬ ä½œè€…è¯´

> æ¬¢è¿Žæå‡ºå„ç§é—®é¢˜!  
> ä¸€èµ·è¿›æ­¥ï¼

---

**ðŸŒŸ Enjoy!**  
å³é”®ä¸€ä¸‹ï¼Œç›®å½•ç»“æž„å°½åœ¨æŽŒæ¡ï¼

---

# ðŸŒ² FileTree â€“ Generate Directory Tree via Right-Click

> Instantly generate a clean, tree-structured directory listing by right-clicking on any folder background or desktopâ€”and save it as a text file! Automatically switches between Chinese and English, optimized for performance, and requires no dependencies.

---

## âœ¨ Key Features

- âœ… **Right-click integration**: Generate a directory tree directly from the context menu on folder/desktop backgrounds  
- ðŸŒ **Auto language detection**: Menu and prompts adapt to your system language (Chinese/English)  
- ðŸš€ **High-performance traversal**: Memory pre-allocation, minimized system calls, files listed before folders  
- ðŸŽ¯ **Accurate path handling**: Uses `%V` to correctly receive the target directory path  
- ðŸ–¼ **Custom icon support**: Right-click menu displays your embedded application icon  
- ðŸ“ **Smart output**: Results saved as `directory_tree.txt` with files before directories

---

## ðŸ“¥ How to Use

### 1. First Run: Register the Context Menu

Run `FileTree.exe` **as Administrator**, then choose **1. Register**:

```text
=== Right-Click Menu Manager ===
1. Register "Generate File Tree" to folder background menu
2. Remove from menu
Choose (1/2): 1
```



âœ… After successful registration, youâ€™ll see the menu item when right-clicking on any **folder background or desktop**:

- Chinese systems: `ç”Ÿæˆæ–‡ä»¶æ ‘`  
- English systems: `Generate File Tree`

### 2. Generate a Directory Tree

Right-click â†’ Select the menu item. The program will automatically:

- Traverse the current directory  
- Generate a tree structure  
- Save it as `directory_tree.txt` in the current folder

Sample output (`directory_tree.txt`):

```
Directory Tree: C:\MyProject
MyProject\
â”œâ”€â”€  src\
â”‚   â”œâ”€â”€ main.cpp
â”‚   â””â”€â”€ resource.rc
â”œâ”€â”€  bin\
â”‚   â””â”€â”€ FileTree.exe
â””â”€â”€  README.md
```

### 3. Uninstall (Optional)

Run `FileTree.exe` **as Administrator** again and choose **2. Remove** to delete the context menu entry.

---

## ðŸŒ Multi-Language Support

The program auto-detects your system UI language:

| System Language                  | Menu Name          | Console Prompts | Output Title          |
| -------------------------------- | ------------------ | --------------- | --------------------- |
| Chinese (Simplified/Traditional) | ç”Ÿæˆæ–‡ä»¶æ ‘         | Chinese         | `ç›®å½•æ ‘: ...`         |
| Others (default)                 | Generate File Tree | English         | `Directory Tree: ...` |

> The output filename is always `directory_tree.txt` (in English) to avoid path compatibility issues.

---

## âš™ï¸ Technical Details

- Language detection via `GetUserDefaultUILanguage()`
- Registry path: `HKEY_CLASSES_ROOT\Directory\Background\shell\...`
- Command-line argument: `"%V"` passes the correct directory path
- Sorting order: **Files before folders**, alphabetical within each group
- Memory optimization: String pre-allocation, object reuse, minimal allocations

---

## ðŸ“„ License

This project is licensed under the **MIT License** â€” see the [LICENSE](LICENSE) file for details.

---

## ðŸ’¬ From the Author

> Questions? Suggestions?  
> Letâ€™s learn and improve together!

---

**ðŸŒŸ Enjoy!**  
One right-click, and your directory structure is revealed!
